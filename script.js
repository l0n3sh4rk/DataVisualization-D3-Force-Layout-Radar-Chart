var w = 1300;
var h = 1000;
var dataset = {};
dataset.nodes = [{name:"Roger Federer"},{name:"Novak Djokovic"},{name:"Rafael Nadal"},{name:"Andy Roddick"},{name:"Andy Murray"},{name:"Lleyton Hewitt"},{name:"David Ferrer"},{name:"Tommy Robredo"},{name:"James Blake"},{name:"Nikolay Davydenko"},{name:"Tomas Berdych"},{name:"Fernando Verdasco"},{name:"Tommy Haas"},{name:"Juan Martin Del Potro"},{name:"Stanislas Wawrinka"},{name:"David Nalbandian"},{name:"Richard Gasquet"},{name:"Andre Agassi"},{name:"Mardy Fish"},{name:"Mikhail Youzhny"},{name:"John Isner"},{name:"Juan Carlos Ferrero"},{name:"Feliciano Lopez"},{name:"Robby Ginepri"},{name:"Gael Monfils"},{name:"Janko Tipsarevic"},{name:"Marin Cilic"},{name:"Philipp Kohlschreiber"},{name:"Carlos Moya"},{name:"Fernando Gonzalez"},{name:"Gilles Simon"},{name:"Jo-Wilfried Tsonga"},{name:"Sam Querrey"},{name:"Jurgen Melzer"},{name:"Juan Ignacio Chela"},{name:"Nicolas Almagro"},{name:"Gilles Muller"},{name:"Julien Benneteau"},{name:"Nicolas Kiefer"},{name:"Radek Stepanek"},{name:"Robin Soderling"},{name:"Taylor Dent"},{name:"Guillermo Coria"},{name:"Ivo Karlovic"},{name:"Jarkko Nieminen"},{name:"Marcel Granollers"},{name:"Michael Llodra"},{name:"Paradorn Srichaphan"},{name:"Xavier Malisse"},{name:"Arnaud Clement"}];
dataset.edges = [{source: 0,target: 11,year: 2012,mid: 589246},{source: 0,target: 31,year: 2011,mid: 343391},{source: 0,target: 26,year: 2011,mid: 343246},{source: 0,target: 40,year: 2010,mid: 314246},{source: 0,target: 33,year: 2010,mid: 314037},{source: 0,target: 1,year: 2009,mid: 284227},{source: 0,target: 40,year: 2009,mid: 284115},{source: 0,target: 7,year: 2009,mid: 283941},{source: 0,target: 5,year: 2009,mid: 283764},{source: 0,target: 4,year: 2008,mid: 252635},{source: 0,target: 1,year: 2008,mid: 252352},{source: 0,target: 36,year: 2008,mid: 252298},{source: 0,target: 39,year: 2008,mid: 252003},{source: 0,target: 38,year: 2005,mid: 7390},{source: 0,target: 15,year: 2005,mid: 7637},{source: 0,target: 5,year: 2005,mid: 7287},{source: 0,target: 17,year: 2005,mid: 7272},{source: 0,target: 20,year: 2007,mid: 224013},{source: 0,target: 22,year: 2007,mid: 224097},{source: 0,target: 3,year: 2007,mid: 224312},{source: 0,target: 9,year: 2007,mid: 224387},{source: 0,target: 1,year: 2007,mid: 224478},{source: 0,target: 8,year: 2006,mid: 192865},{source: 0,target: 9,year: 2006,mid: 192866},{source: 0,target: 3,year: 2006,mid: 192862},{source: 0,target: 5,year: 2004,mid: 7282},{source: 0,target: 17,year: 2004,mid: 7268},{source: 0,target: 8,year: 2003,mid: 7597},{source: 1,target: 6,year: 2012,mid: 590930},{source: 1,target: 13,year: 2012,mid: 590480},{source: 1,target: 14,year: 2012,mid: 590411},{source: 1,target: 37,year: 2012,mid: 589300},{source: 1,target: 2,year: 2011,mid: 344045},{source: 1,target: 0,year: 2011,mid: 343528},{source: 1,target: 25,year: 2011,mid: 343529},{source: 1,target: 9,year: 2011,mid: 343253},{source: 1,target: 0,year: 2010,mid: 314416},{source: 1,target: 24,year: 2010,mid: 314267},{source: 1,target: 18,year: 2010,mid: 314001},{source: 1,target: 8,year: 2010,mid: 313965},{source: 1,target: 11,year: 2009,mid: 284142},{source: 1,target: 39,year: 2009,mid: 283962},{source: 1,target: 3,year: 2008,mid: 252292},{source: 1,target: 7,year: 2008,mid: 252192},{source: 1,target: 26,year: 2008,mid: 252040},{source: 1,target: 49,year: 2008,mid: 251825},{source: 1,target: 18,year: 2006,mid: 194833},{source: 1,target: 39,year: 2007,mid: 223992},{source: 1,target: 13,year: 2007,mid: 224040},{source: 1,target: 28,year: 2007,mid: 224341},{source: 1,target: 6,year: 2007,mid: 224383},{source: 1,target: 24,year: 2005,mid: 138876},{source: 1,target: 45,year: 2013,mid: 670474},{source: 1,target: 19,year: 2013,mid: 670972},{source: 1,target: 14,year: 2013,mid: 671167},{source: 2,target: 4,year: 2011,mid: 343411},{source: 2,target: 3,year: 2011,mid: 343409},{source: 2,target: 36,year: 2011,mid: 343410},{source: 2,target: 15,year: 2011,mid: 343249},{source: 2,target: 1,year: 2010,mid: 314656},{source: 2,target: 19,year: 2010,mid: 314396},{source: 2,target: 11,year: 2010,mid: 314379},{source: 2,target: 22,year: 2010,mid: 314116},{source: 2,target: 30,year: 2010,mid: 313991},{source: 2,target: 29,year: 2009,mid: 284166},{source: 2,target: 24,year: 2009,mid: 283982},{source: 2,target: 35,year: 2009,mid: 283829},{source: 2,target: 38,year: 2009,mid: 283738},{source: 2,target: 16,year: 2009,mid: 283571},{source: 2,target: 18,year: 2008,mid: 252267},{source: 2,target: 32,year: 2008,mid: 252142},{source: 2,target: 25,year: 2007,mid: 223977},{source: 2,target: 31,year: 2007,mid: 224082},{source: 2,target: 27,year: 2013,mid: 670189},{source: 2,target: 7,year: 2013,mid: 670855},{source: 2,target: 16,year: 2013,mid: 671162},{source: 2,target: 1,year: 2013,mid: 671831},{source: 3,target: 6,year: 2011,mid: 343392},{source: 3,target: 37,year: 2011,mid: 343271},{source: 3,target: 29,year: 2008,mid: 252200},{source: 3,target: 11,year: 2006,mid: 193032},{source: 3,target: 10,year: 2007,mid: 224078},{source: 3,target: 5,year: 2006,mid: 193028},{source: 3,target: 19,year: 2006,mid: 193030},{source: 3,target: 7,year: 2004,mid: 28291},{source: 3,target: 2,year: 2004,mid: 28456},{source: 3,target: 21,year: 2003,mid: 28145},{source: 3,target: 15,year: 2003,mid: 28418},{source: 3,target: 48,year: 2003,mid: 28274},{source: 4,target: 1,year: 2012,mid: 591633},{source: 4,target: 10,year: 2012,mid: 590912},{source: 4,target: 26,year: 2012,mid: 590330},{source: 4,target: 22,year: 2012,mid: 589248},{source: 4,target: 20,year: 2011,mid: 343433},{source: 4,target: 22,year: 2011,mid: 343274},{source: 4,target: 41,year: 2009,mid: 283830},{source: 4,target: 2,year: 2008,mid: 252446},{source: 4,target: 13,year: 2008,mid: 252287},{source: 4,target: 14,year: 2008,mid: 252148},{source: 4,target: 33,year: 2008,mid: 251984},{source: 4,target: 46,year: 2008,mid: 251917},{source: 4,target: 29,year: 2006,mid: 194039},{source: 4,target: 46,year: 2013,mid: 668611},{source: 5,target: 36,year: 2012,mid: 588856},{source: 5,target: 34,year: 2009,mid: 283565},{source: 5,target: 41,year: 2005,mid: 3290},{source: 5,target: 44,year: 2005,mid: 3330},{source: 5,target: 1,year: 2006,mid: 192842},{source: 5,target: 16,year: 2006,mid: 192841},{source: 5,target: 12,year: 2004,mid: 3053},{source: 5,target: 22,year: 2004,mid: 3296},{source: 5,target: 47,year: 2003,mid: 3266},{source: 5,target: 39,year: 2003,mid: 3281},{source: 5,target: 13,year: 2013,mid: 669097},{source: 6,target: 25,year: 2012,mid: 590452},{source: 6,target: 16,year: 2012,mid: 590221},{source: 6,target: 5,year: 2012,mid: 589381},{source: 6,target: 8,year: 2011,mid: 343206},{source: 6,target: 35,year: 2006,mid: 193640},{source: 6,target: 15,year: 2007,mid: 224062},{source: 6,target: 2,year: 2007,mid: 224248},{source: 6,target: 34,year: 2007,mid: 224295},{source: 6,target: 25,year: 2013,mid: 670171},{source: 7,target: 46,year: 2010,mid: 313990},{source: 7,target: 37,year: 2010,mid: 313901},{source: 7,target: 8,year: 2009,mid: 283788},{source: 7,target: 31,year: 2008,mid: 252014},{source: 7,target: 18,year: 2007,mid: 223952},{source: 7,target: 49,year: 2004,mid: 26792},{source: 7,target: 0,year: 2013,mid: 670170},{source: 8,target: 45,year: 2012,mid: 588793},{source: 8,target: 7,year: 2005,mid: 79321},{source: 8,target: 28,year: 2006,mid: 193333},{source: 8,target: 10,year: 2006,mid: 193336},{source: 8,target: 2,year: 2005,mid: 79464},{source: 9,target: 4,year: 2006,mid: 193458},{source: 9,target: 38,year: 2007,mid: 223883},{source: 9,target: 35,year: 2007,mid: 223997},{source: 9,target: 12,year: 2007,mid: 224283},{source: 9,target: 12,year: 2006,mid: 193449},{source: 9,target: 40,year: 2004,mid: 87424},{source: 10,target: 0,year: 2012,mid: 590398},{source: 10,target: 35,year: 2012,mid: 589417},{source: 10,target: 32,year: 2012,mid: 589247},{source: 10,target: 11,year: 2007,mid: 224029},{source: 10,target: 19,year: 2004,mid: 107444},{source: 10,target: 37,year: 2013,mid: 669217},{source: 11,target: 44,year: 2011,mid: 342914},{source: 11,target: 6,year: 2010,mid: 314115},{source: 11,target: 15,year: 2010,mid: 313976},{source: 11,target: 20,year: 2009,mid: 283950},{source: 11,target: 12,year: 2009,mid: 283791},{source: 11,target: 1,year: 2005,mid: 97135},{source: 11,target: 7,year: 2003,mid: 96985},{source: 12,target: 16,year: 2008,mid: 251739},{source: 12,target: 23,year: 2006,mid: 192879},{source: 12,target: 8,year: 2007,mid: 224095},{source: 12,target: 10,year: 2004,mid: 8862},{source: 13,target: 3,year: 2012,mid: 590337},{source: 13,target: 0,year: 2009,mid: 284416},{source: 13,target: 2,year: 2009,mid: 284217},{source: 13,target: 26,year: 2009,mid: 284162},{source: 13,target: 21,year: 2009,mid: 283974},{source: 13,target: 33,year: 2009,mid: 283704},{source: 13,target: 30,year: 2008,mid: 251963},{source: 13,target: 33,year: 2007,mid: 223989},{source: 14,target: 32,year: 2010,mid: 314123},{source: 14,target: 4,year: 2010,mid: 313992},{source: 14,target: 34,year: 2010,mid: 313926},{source: 14,target: 34,year: 2006,mid: 194052},{source: 14,target: 23,year: 2007,mid: 224036},{source: 14,target: 39,year: 2013,mid: 668582},{source: 14,target: 43,year: 2013,mid: 669102},{source: 14,target: 10,year: 2013,mid: 670473},{source: 14,target: 4,year: 2013,mid: 670970},{source: 15,target: 29,year: 2005,mid: 86938},{source: 15,target: 48,year: 2007,mid: 223928},{source: 15,target: 0,year: 2003,mid: 86784},{source: 15,target: 44,year: 2003,mid: 86945},{source: 15,target: 27,year: 2003,mid: 87000},{source: 16,target: 9,year: 2010,mid: 313860},{source: 16,target: 30,year: 2006,mid: 193644},{source: 16,target: 6,year: 2013,mid: 670854},{source: 17,target: 10,year: 2005,mid: 1333},{source: 17,target: 48,year: 2005,mid: 1000},{source: 17,target: 8,year: 2005,mid: 1285},{source: 17,target: 23,year: 2005,mid: 1314},{source: 17,target: 43,year: 2005,mid: 1319},{source: 17,target: 23,year: 2004,mid: 1313},{source: 17,target: 42,year: 2003,mid: 999},{source: 17,target: 41,year: 2003,mid: 1273},{source: 18,target: 30,year: 2012,mid: 589272},{source: 18,target: 9,year: 2012,mid: 588794},{source: 18,target: 49,year: 2010,mid: 313964},{source: 18,target: 24,year: 2008,mid: 252084},{source: 18,target: 8,year: 2008,mid: 251998},{source: 18,target: 6,year: 2004,mid: 85552},{source: 19,target: 14,year: 2010,mid: 314377},{source: 19,target: 7,year: 2010,mid: 314045},{source: 19,target: 20,year: 2010,mid: 313989},{source: 19,target: 7,year: 2006,mid: 192986},{source: 19,target: 2,year: 2006,mid: 192989},{source: 19,target: 15,year: 2004,mid: 24773},{source: 19,target: 12,year: 2013,mid: 669281},{source: 19,target: 5,year: 2013,mid: 670186},{source: 20,target: 44,year: 2012,mid: 588866},{source: 20,target: 48,year: 2012,mid: 588712},{source: 20,target: 30,year: 2011,mid: 343521},{source: 20,target: 23,year: 2011,mid: 343212},{source: 20,target: 3,year: 2009,mid: 283792},{source: 20,target: 44,year: 2007,mid: 223606},{source: 20,target: 24,year: 2013,mid: 669050},{source: 21,target: 45,year: 2011,mid: 343233},{source: 21,target: 24,year: 2011,mid: 343136},{source: 21,target: 30,year: 2009,mid: 283823},{source: 21,target: 17,year: 2003,mid: 4221},{source: 21,target: 5,year: 2003,mid: 4226},{source: 21,target: 34,year: 2003,mid: 4480},{source: 21,target: 33,year: 2003,mid: 4487},{source: 22,target: 21,year: 2007,mid: 223595},{source: 22,target: 27,year: 2004,mid: 77627},{source: 23,target: 16,year: 2005,mid: 90863},{source: 23,target: 42,year: 2005,mid: 90736},{source: 23,target: 37,year: 2006,mid: 193512},{source: 23,target: 12,year: 2005,mid: 90733},{source: 23,target: 36,year: 2005,mid: 90866},{source: 23,target: 6,year: 2003,mid: 90860},{source: 24,target: 16,year: 2010,mid: 314000},{source: 24,target: 25,year: 2010,mid: 313957},{source: 24,target: 15,year: 2008,mid: 251981},{source: 25,target: 27,year: 2012,mid: 590327},{source: 25,target: 21,year: 2011,mid: 343412},{source: 25,target: 10,year: 2011,mid: 343235},{source: 25,target: 3,year: 2010,mid: 313836},{source: 26,target: 4,year: 2009,mid: 283973},{source: 26,target: 23,year: 2008,mid: 251896},{source: 26,target: 37,year: 2008,mid: 251779},{source: 27,target: 20,year: 2012,mid: 589406},{source: 27,target: 46,year: 2012,mid: 588708},{source: 27,target: 19,year: 2007,mid: 223942},{source: 27,target: 37,year: 2004,mid: 97964},{source: 27,target: 20,year: 2013,mid: 669153},{source: 28,target: 27,year: 2007,mid: 224084},{source: 28,target: 46,year: 2005,mid: 9611},{source: 29,target: 31,year: 2009,mid: 283977},{source: 29,target: 10,year: 2009,mid: 283827},{source: 29,target: 44,year: 2008,mid: 252063},{source: 30,target: 13,year: 2011,mid: 343275},{source: 30,target: 27,year: 2010,mid: 313928},{source: 30,target: 45,year: 2008,mid: 251487},{source: 31,target: 18,year: 2011,mid: 343486},{source: 31,target: 11,year: 2011,mid: 343252},{source: 31,target: 37,year: 2009,mid: 283831},{source: 31,target: 44,year: 2009,mid: 283696},{source: 31,target: 28,year: 2008,mid: 251965},{source: 32,target: 35,year: 2010,mid: 313978},{source: 32,target: 45,year: 2010,mid: 313930},{source: 32,target: 43,year: 2008,mid: 251944},{source: 32,target: 10,year: 2008,mid: 251587},{source: 32,target: 27,year: 2006,mid: 194604},{source: 33,target: 21,year: 2010,mid: 313963},{source: 33,target: 22,year: 2008,mid: 251564},{source: 34,target: 14,year: 2007,mid: 224154},{source: 34,target: 10,year: 2003,mid: 80026},{source: 35,target: 39,year: 2012,mid: 588569},{source: 35,target: 23,year: 2009,mid: 283744},{source: 36,target: 19,year: 2012,mid: 588683},{source: 36,target: 9,year: 2008,mid: 252207},{source: 36,target: 35,year: 2008,mid: 252074},{source: 36,target: 12,year: 2008,mid: 251882},{source: 36,target: 3,year: 2005,mid: 98745},{source: 37,target: 35,year: 2011,mid: 342984},{source: 37,target: 39,year: 2010,mid: 313697},{source: 38,target: 46,year: 2009,mid: 283484},{source: 38,target: 49,year: 2005,mid: 13614},{source: 38,target: 39,year: 2005,mid: 13829},{source: 39,target: 27,year: 2011,mid: 342812},{source: 39,target: 27,year: 2009,mid: 283765},{source: 39,target: 22,year: 2003,mid: 74158},{source: 40,target: 41,year: 2010,mid: 313859},{source: 40,target: 9,year: 2009,mid: 283828},{source: 40,target: 32,year: 2009,mid: 283790},{source: 40,target: 45,year: 2009,mid: 283688},{source: 40,target: 29,year: 2004,mid: 94970},{source: 41,target: 22,year: 2009,mid: 283487},{source: 41,target: 35,year: 2005,mid: 75869},{source: 41,target: 29,year: 2003,mid: 75801},{source: 41,target: 9,year: 2003,mid: 75812},{source: 41,target: 40,year: 2003,mid: 75823},{source: 42,target: 40,year: 2005,mid: 11260},{source: 43,target: 16,year: 2011,mid: 343142},{source: 43,target: 29,year: 2011,mid: 342815},{source: 43,target: 18,year: 2005,mid: 95224},{source: 43,target: 8,year: 2013,mid: 668609},{source: 44,target: 11,year: 2005,mid: 86210},{source: 45,target: 48,year: 2011,mid: 342766},{source: 46,target: 10,year: 2010,mid: 313786},{source: 46,target: 33,year: 2004,mid: 85313},{source: 47,target: 9,year: 2005,mid: 65636},{source: 47,target: 11,year: 2003,mid: 65664},{source: 48,target: 44,year: 2006,mid: 192997},{source: 48,target: 19,year: 2005,mid: 25366},{source: 49,target: 43,year: 2007,mid: 223646},{source: 49,target: 4,year: 2005,mid: 5266},{source: 49,target: 21,year: 2005,mid: 5009}];
var zoom = d3.behavior.zoom().scaleExtent([1, 10]).on("zoom", null);
var force = d3.layout.force().nodes(dataset.nodes).links(dataset.edges).size([w-50, h-50]).linkDistance([500]).charge([-1000]).start();
var svg = d3.select("body").append("svg").attr("width", w).attr("height", h).call(zoom).on("dblclick.zoom", null);
var edges = svg.selectAll("line").data(dataset.edges).enter().append("g").attr("class", "link");
var line = edges.append("line").style("stroke", "#eee").style("stroke-width", 1).attr("x1",function(d){return d.source.x;}).attr("y1",function(d){return d.source.y;}).attr("x2",function(d){return d.target.x;}).attr("y2",function(d){return d.target.y;}).attr("class",function(d){return "a"+d.source.index;}).attr("class",function(d){return "a"+d.target.index;}).attr("mid",function(d){return (edges.select("line").attr("mid")!=null)?edges.select("line").attr("mid")+","+d.mid:d.mid;});
var edge_labels = edges.append("text").text(function(d){return edges.select("text").text()+" "+d.year}).attr("x",function(d){return (d.source.x+d.target.x)/2;}).attr("y",function(d){return (d.source.y+d.target.y)/2;}).attr("style","font-size:10px;display:none;z-index:1000;");
var nodes = svg.selectAll("circle").data(dataset.nodes).enter().append("g").attr("class", "node");
var circles = nodes.append("circle").attr("r", 20).style("fill", "87defa").style("stroke","87aefa").style("stroke-width","2px").attr("cx",function(d){return d.x;}).attr("cy",function(d){return d.y;}).attr("index",function(d){return "a"+d.index;});
var labels = nodes.append("text").text(function(d){return d.name;}).attr("x",function(d){return d.x;}).attr("y",function(d){return d.y;}).attr("style","font-size:10px;");
var add_force_nodes = nodes.call(force.drag);
force.on("tick", function() {
	line.attr("x1", function(d) { return d.source.x; })
		.attr("y1", function(d) { return d.source.y; })
		.attr("x2", function(d) { return d.target.x; })
		.attr("y2", function(d) { return d.target.y; });
	circles.attr("cx", function(d) { return d.x=Math.max(50,Math.min(d.x,w-50)); })
		.attr("cy", function(d) { return d.y=Math.max(50,Math.min(d.y,h-50));});
	labels.attr("x", function(d) { return d.x; })
		.attr("y", function(d) { return d.y; });
	edge_labels.attr("x",function(d){return (d.source.x+d.target.x)/2;})
		.attr("y",function(d){return (d.source.y+d.target.y)/2;});
});
circles.on("click",function(){
	circles.attr("r", 20).style("fill", "87defa").style("stroke","87aefa").style("stroke-width","2px");
	circles.classed("selected-circle",false);
	labels.attr("style","font-size:10px;").attr("font-weight","normal");
	edge_labels.attr("style","font-size:10px;display:none;");
	d3.selectAll("line").style("stroke", "#eee").style("stroke-width", 1);
	d3.select(this).style("fill", "87befa").style("stroke","87aefa").style("stroke-width","3px").attr("r",30).attr("class","selected-circle");
	d3.select(this.nextSibling).attr("style","font-weight:bold").attr("style","font-size:14px");
	var thisIndex = d3.select(this).attr("index");
	d3.selectAll("."+thisIndex).style("stroke","#aaa").style("stroke-width",5);
	d3.selectAll("."+thisIndex+"+ text").attr("style","display:block;");
	force.charge(function(node,i){
		if("a"+node.index == thisIndex){
			return -18000;
		}
		return -1000;
	});
	force.start();
});
line.on("click",function(){
	if(d3.select(this).style("stroke-width")=="5px"){
		window.location.href = "./index2.html?mid="+d3.select(this).attr("mid");//+"&player="+d3.select(".selected-circle").node().nextSibling.innerHTML;
	}
});